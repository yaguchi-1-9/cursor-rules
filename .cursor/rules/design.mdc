---
description: 
globs: 
alwaysApply: true
---
# 詳細設計ルール

## データベース詳細設計ルール
- テーブル詳細設計
  - カラム定義
    - カラム名の命名規則
    - データ型の詳細指定
    - 長さ・精度の設定
  - NULL制約
    - NOT NULL制約の詳細
    - NULL許容の条件
    - デフォルト値の設定
  - 制約定義
    - 主キー制約の詳細
    - 外部キー制約の詳細
    - チェック制約の詳細
  - コメント
    - カラムの説明
    - ビジネスルール
    - 使用上の注意

- インデックス詳細設計
  - 主キーインデックス
    - インデックス名の規則
    - インデックスタイプ
    - クラスタリング設定
  - 外部キーインデックス
    - 参照整合性の詳細
    - カスケード設定
    - インデックスオプション
  - 通常インデックス
    - 複合インデックスの順序
    - カバリングインデックス
    - 部分インデックス
  - ユニークインデックス
    - 一意性制約の詳細
    - NULL値の扱い
    - 複合ユニーク制約

- パフォーマンス最適化
  - クエリ最適化
    - 実行計画の分析
    - インデックス使用の最適化
    - クエリの書き換え
  - パーティショニング
    - パーティション戦略
    - パーティションキー
    - パーティション管理
  - アーカイブ戦略
    - アーカイブ条件
    - アーカイブ方法
    - データ保持期間

## クラス詳細設計ルール
- ドメインモデル詳細設計
  - エンティティ詳細
    - 属性の詳細定義
    - バリデーションルール
    - ビジネスルール
  - 値オブジェクト詳細
    - 不変条件の詳細
    - 等価性の実装
    - バリデーション
  - 集約詳細
    - 一貫性の確保方法
    - 境界の詳細定義
    - アクセス制御の実装

- ユースケース詳細設計
  - コマンド詳細
    - メソッドシグネチャ
    - パラメータの詳細
    - 戻り値の詳細
  - クエリ詳細
    - 検索条件の詳細
    - ソート条件の詳細
    - ページネーション
  - イベント詳細
    - イベントの詳細定義
    - ハンドラの実装詳細
    - 非同期処理の詳細

- リポジトリ詳細設計
  - インターフェース詳細
    - メソッドの詳細定義
    - 戻り値の型定義
    - 例外の詳細定義
  - 実装詳細
    - データアクセスの詳細
    - トランザクション管理
    - キャッシュ管理
  - クエリ最適化
    - N+1問題の対策
    - インデックスの活用
    - パフォーマンスチューニング

## API詳細設計ルール
- エンドポイント詳細設計
  - リソース詳細
    - リソースの詳細定義
    - リソース間の関連
    - リソースの状態遷移
  - 操作詳細
    - HTTPメソッドの詳細
    - リクエストパラメータ
    - レスポンス形式
  - バージョニング詳細
    - バージョン管理方法
    - 互換性の確保
    - 移行戦略

- 認証・認可詳細設計
  - 認証詳細
    - 認証フローの詳細
    - トークンの詳細
    - セッション管理
  - 認可詳細
    - 権限の詳細定義
    - アクセス制御の詳細
    - ロール管理
  - セキュリティ詳細
    - 暗号化の詳細
    - セキュリティヘッダー
    - セキュリティ設定

- エラーハンドリング詳細設計
  - エラー詳細
    - エラーコードの詳細
    - エラーメッセージの詳細
    - エラー情報の構造
  - バリデーション詳細
    - 入力値チェックの詳細
    - バリデーションルール
    - エラーレスポンス
  - ログ詳細
    - ログレベル
    - ログフォーマット
    - ログ出力項目

## フロントエンド詳細設計ルール
- コンポーネント詳細設計
  - コンポーネント構造
    - コンポーネントの階層
    - プロパティの詳細
    - イベントの詳細
  - 状態管理詳細
    - 状態の詳細定義
    - 状態更新の詳細
    - 状態の永続化
  - イベント処理詳細
    - イベントハンドラの詳細
    - イベント伝播の詳細
    - 非同期処理の詳細

- スタイル詳細設計
  - CSS詳細
    - クラス名の規則
    - スタイルの詳細
    - メディアクエリ
  - テーマ詳細
    - カラーの詳細
    - タイポグラフィの詳細
    - スペーシングの詳細
  - レスポンシブ詳細
    - ブレークポイントの詳細
    - レイアウトの詳細
    - コンポーネントの適応

- パフォーマンス最適化詳細
  - レンダリング最適化
    - 仮想DOMの詳細
    - メモ化の詳細
    - 遅延ロードの詳細
  - アセット最適化
    - バンドルの詳細
    - 圧縮の詳細
    - キャッシュの詳細
  - ネットワーク最適化
    - プリフェッチの詳細
    - プリロードの詳細
    - コード分割の詳細

## テスト詳細設計ルール
- テストケース詳細設計
  - 単体テスト詳細
    - テストケースの詳細
    - テストデータの詳細
    - アサーションの詳細
  - 統合テスト詳細
    - テストシナリオの詳細
    - テスト環境の詳細
    - テストデータの詳細
  - E2Eテスト詳細
    - ユーザーフローの詳細
    - テストシナリオの詳細
    - テスト環境の詳細

- テストデータ詳細設計
  - テストデータ生成
    - ファクトリの詳細
    - フィクスチャの詳細
    - シーダーの詳細
  - テストデータ管理
    - データの独立性の詳細
    - データのクリーンアップの詳細
    - データのバージョン管理の詳細
  - モック/スタブ詳細
    - モックの詳細
    - スタブの詳細
    - 検証の詳細

- テスト環境詳細設計
  - 環境構築詳細
    - 開発環境の詳細
    - テスト環境の詳細
    - CI環境の詳細
  - テスト実行詳細
    - 自動化の詳細
    - 並列実行の詳細
    - レポートの詳細
  - 品質管理詳細
    - カバレッジの詳細
    - 静的解析の詳細
    - パフォーマンスの詳細
